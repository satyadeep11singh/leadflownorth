---
import Layout from '../../layouts/Layout.astro';
import { demoIndustries } from '../../data/demo-industries';

const schema = {
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "Interactive Website Demos — Lead Flow North",
  "description": "See what your custom website could look like. Choose your industry, enter your business details, and watch a personalized website preview come to life.",
  "provider": {
    "@type": "LocalBusiness",
    "name": "Lead Flow North"
  }
};
---

<Layout
  title="Interactive Website Demos — See Your Future Website | Lead Flow North"
  description="Choose your industry and build a personalized website preview in seconds. Enter your business details and watch your custom website come to life. Free demo builder by Lead Flow North."
  structuredData={schema}
>
  <!-- Hero -->
  <section class="py-16 lg:py-24 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <div class="inline-flex items-center gap-2 px-4 py-2 bg-accent-100 dark:bg-accent-900/30 rounded-full mb-6">
        <span class="text-sm font-medium text-accent-700 dark:text-accent-300">Interactive Demo Builder</span>
      </div>
      <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold text-slate-900 dark:text-white mb-6">
        See Your Future Website
      </h1>
      <p class="text-lg sm:text-xl text-slate-600 dark:text-slate-300 max-w-3xl mx-auto mb-8">
        Choose your industry below. Enter your business name, phone, colors, and services — and watch a personalized website preview come to life instantly.
      </p>
      <p class="text-sm text-slate-500 dark:text-slate-400">
        100% free &bull; No signup required &bull; Takes 30 seconds
      </p>
    </div>
  </section>

  <!-- Search Bar -->
  <section class="py-6 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 sticky top-16 z-20">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="relative">
        <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        <input
          type="text"
          id="demo-search"
          placeholder="Search industries... (e.g., plumbing, dental, restaurant)"
          class="w-full pl-12 pr-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
        />
      </div>
    </div>
  </section>

  <!-- Industry Grid -->
  <section class="py-16 lg:py-24 bg-white dark:bg-slate-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div id="demo-grid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {demoIndustries.map((ind) => (
          <a
            href={`/demos/${ind.slug}`}
            class="demo-card group bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 hover:border-primary-500 dark:hover:border-primary-500 hover:shadow-lg transition-all duration-200"
            data-name={ind.name.toLowerCase()}
            data-services={ind.services.join(' ').toLowerCase()}
          >
            <div class="flex items-center gap-3 mb-4">
              <span class="text-3xl">{ind.icon}</span>
              <h2 class="text-xl font-bold text-slate-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors">
                {ind.name}
              </h2>
            </div>
            <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
              {ind.description}
            </p>
            <div class="flex flex-wrap gap-1.5 mb-4">
              {ind.services.slice(0, 4).map((s) => (
                <span class="px-2 py-0.5 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 text-xs rounded-full">
                  {s}
                </span>
              ))}
              {ind.services.length > 4 && (
                <span class="px-2 py-0.5 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 text-xs rounded-full">
                  +{ind.services.length - 4} more
                </span>
              )}
            </div>
            <div class="flex items-center text-sm font-semibold text-primary-600 dark:text-primary-400 group-hover:gap-2 transition-all">
              Build Your Demo
              <svg class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
            </div>
          </a>
        ))}
      </div>

      <!-- No Results -->
      <div id="demo-no-results" class="hidden text-center py-12">
        <p class="text-lg text-slate-500 dark:text-slate-400 mb-4">No industries match your search.</p>
        <p class="text-sm text-slate-400 dark:text-slate-500">Try a different keyword, or <a href="/contact" class="text-primary-600 hover:underline">contact us</a> for a custom demo.</p>
      </div>
    </div>
  </section>

  <!-- Bottom CTA -->
  <section class="py-16 lg:py-24 bg-gradient-to-br from-primary-600 to-primary-800">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl sm:text-4xl font-bold text-white mb-4">
        Don't See Your Industry?
      </h2>
      <p class="text-lg text-primary-100 mb-8 max-w-2xl mx-auto">
        We build websites for every type of business. Book a free strategy call and we'll create a custom demo just for you.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/contact" class="inline-flex items-center justify-center px-8 py-4 bg-white text-primary-700 font-bold text-lg rounded-xl hover:bg-primary-50 transition-colors duration-200 shadow-xl">
          Book Your Free Strategy Call
          <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
        </a>
        <a href="/industries" class="inline-flex items-center justify-center px-8 py-4 border-2 border-white/50 text-white font-bold text-lg rounded-xl hover:bg-white/10 transition-colors duration-200">
          Browse All Industries
        </a>
      </div>
    </div>
  </section>
</Layout>

<script>
  const searchInput = document.getElementById('demo-search') as HTMLInputElement | null;
  const grid = document.getElementById('demo-grid');
  const noResults = document.getElementById('demo-no-results');

  if (searchInput && grid && noResults) {
    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase().trim();
      const cards = grid.querySelectorAll('.demo-card') as NodeListOf<HTMLElement>;
      let visibleCount = 0;

      cards.forEach((card) => {
        const name = card.dataset.name || '';
        const services = card.dataset.services || '';
        const matches = !query || name.includes(query) || services.includes(query);
        card.style.display = matches ? '' : 'none';
        if (matches) visibleCount++;
      });

      noResults.classList.toggle('hidden', visibleCount > 0);
    });
  }
</script>
