---
interface Props {
  defaults: {
    businessName: string;
    tagline: string;
    phone: string;
    email: string;
    location: string;
    primaryColor: string;
    accentColor: string;
  };
  services: string[];
}

const { defaults, services } = Astro.props;
---

<div id="demo-form" class="bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6 lg:sticky lg:top-24">
  <div class="mb-6">
    <h2 class="text-xl font-bold text-slate-900 dark:text-white mb-1">Customize Your Website</h2>
    <p class="text-sm text-slate-500 dark:text-slate-400">Enter your details, the preview updates instantly.</p>
  </div>

  <div class="space-y-5">
    <!-- Business Name -->
    <div>
      <label for="demo-business-name" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Business Name</label>
      <input
        type="text"
        id="demo-business-name"
        placeholder={defaults.businessName}
        value={defaults.businessName}
        class="w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
      />
    </div>

    <!-- Tagline -->
    <div>
      <label for="demo-tagline" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Tagline / Slogan</label>
      <input
        type="text"
        id="demo-tagline"
        placeholder={defaults.tagline}
        value={defaults.tagline}
        class="w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
      />
    </div>

    <!-- Phone -->
    <div>
      <label for="demo-phone" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Phone Number</label>
      <input
        type="tel"
        id="demo-phone"
        placeholder={defaults.phone}
        value={defaults.phone}
        class="w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
      />
    </div>

    <!-- Email -->
    <div>
      <label for="demo-email" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Email Address</label>
      <input
        type="email"
        id="demo-email"
        placeholder={defaults.email}
        value={defaults.email}
        class="w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
      />
    </div>

    <!-- Location -->
    <div>
      <label for="demo-location" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">City / Location</label>
      <input
        type="text"
        id="demo-location"
        placeholder={defaults.location}
        value={defaults.location}
        class="w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
      />
    </div>

    <!-- Colors -->
    <div class="space-y-4">
      <div>
        <label for="demo-primary-color" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Primary Color</label>
        <div class="flex items-center gap-3">
          <input
            type="color"
            id="demo-primary-color"
            value={defaults.primaryColor}
            class="w-14 h-10 rounded-lg border-2 border-slate-300 dark:border-slate-600 cursor-pointer p-0.5 appearance-none"
            style="background: none;"
          />
          <input
            type="text"
            id="demo-primary-color-text"
            value={defaults.primaryColor}
            maxlength="7"
            class="flex-1 px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm font-mono focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
          />
        </div>
        <p class="text-xs text-slate-400 mt-1">Used for headings, nav bar, and buttons</p>
      </div>
      <div>
        <label for="demo-accent-color" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Accent Color</label>
        <div class="flex items-center gap-3">
          <input
            type="color"
            id="demo-accent-color"
            value={defaults.accentColor}
            class="w-14 h-10 rounded-lg border-2 border-slate-300 dark:border-slate-600 cursor-pointer p-0.5 appearance-none"
            style="background: none;"
          />
          <input
            type="text"
            id="demo-accent-color-text"
            value={defaults.accentColor}
            maxlength="7"
            class="flex-1 px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm font-mono focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
          />
        </div>
        <p class="text-xs text-slate-400 mt-1">Used for CTAs, icons, and highlights</p>
      </div>
    </div>

    <!-- Services -->
    <div>
      <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Services to Display</label>
      <div class="grid grid-cols-1 gap-2 max-h-48 overflow-y-auto pr-1">
        {services.map((service, i) => (
          <label class="flex items-center gap-2 cursor-pointer text-sm text-slate-700 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white transition-colors">
            <input
              type="checkbox"
              class="service-checkbox rounded border-slate-300 dark:border-slate-600 text-primary-600 focus:ring-primary-500"
              value={service}
              data-index={i}
              checked
            />
            <span>{service}</span>
          </label>
        ))}
      </div>
    </div>
  </div>

  <!-- CTA Buttons -->
  <div class="mt-8 space-y-3">
    <a
      href="/contact"
      id="demo-cta-book"
      class="flex items-center justify-center w-full px-4 py-3 bg-accent-500 hover:bg-accent-600 text-white font-semibold rounded-xl transition-colors duration-200 text-sm"
    >
      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>
      Get This Website Built
    </a>
    <a
      href="/roi-calculator"
      id="demo-cta-roi"
      class="flex items-center justify-center w-full px-4 py-3 border-2 border-slate-300 dark:border-slate-600 hover:border-primary-500 text-slate-700 dark:text-slate-300 font-semibold rounded-xl transition-colors duration-200 text-sm"
    >
      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
      </svg>
      Calculate Your ROI
    </a>
  </div>

  <p class="mt-4 text-xs text-slate-400 dark:text-slate-500 text-center">
    This is a preview only. Your actual website will be custom-designed by our team.
  </p>
</div>

<script is:inline define:vars={{ defaults, services }}>
  // Sync color pickers with text inputs
  const primaryColor = document.getElementById('demo-primary-color');
  const primaryColorText = document.getElementById('demo-primary-color-text');
  const accentColor = document.getElementById('demo-accent-color');
  const accentColorText = document.getElementById('demo-accent-color-text');

  if (primaryColor && primaryColorText) {
    primaryColor.addEventListener('input', () => {
      primaryColorText.value = primaryColor.value;
      primaryColor.dispatchEvent(new CustomEvent('color-change'));
    });
    primaryColorText.addEventListener('input', () => {
      if (/^#[0-9a-fA-F]{6}$/.test(primaryColorText.value)) {
        primaryColor.value = primaryColorText.value;
        primaryColor.dispatchEvent(new CustomEvent('color-change'));
      }
    });
  }

  if (accentColor && accentColorText) {
    accentColor.addEventListener('input', () => {
      accentColorText.value = accentColor.value;
      accentColor.dispatchEvent(new CustomEvent('color-change'));
    });
    accentColorText.addEventListener('input', () => {
      if (/^#[0-9a-fA-F]{6}$/.test(accentColorText.value)) {
        accentColor.value = accentColorText.value;
        accentColor.dispatchEvent(new CustomEvent('color-change'));
      }
    });
  }


</script>
